<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">

        <title>MISO : Sequencing tutorial</title>
        <meta name="description" content="An open-source LIMS for NGS sequencing centres">

        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="/miso-docs-oicr/styles/main.css">
    </head>
    <body>

        <div class="container">
            <div class="row">
                <div id="header" class="col-sm-12">
                    <h2><a class="brand" href="/miso-docs-oicr/"><img src="/miso-docs-oicr/pics/MISO.png"/>MISO</a>
    <small>An open-source LIMS for NGS sequencing centres</small>
</h2>
<span class="badge" style="position: relative;left:25px;bottom:20px;background:rgb(56,121,59);">OICR</span>

<span><a href="/miso-docs-oicr/plain-index">See the original flavour (plain sample) version of this walkthrough here</a></span>


                </div>
            </div>

            <div class="row">
                
                
                    <div id="content" class="col-sm-12">
                        <div class="page-header">
    <h2>Sequencing tutorial
        
    </h2>
</div>

<div id="toc">
Table of Contents
<ol>
   <li><a href="#login">Logging In</a></li>
   <li><a href="#orders">Checking for sequencing Orders</a></li>
   <li><a href="#nruns">Creating Runs from scratch</a></li>
   <li><a href="#aruns">Working with automatically created runs</a></li>
   <li><a href="#pools">Adding Pools to Runs</a></li>
   <li><a href="#boxes">Scanning libraries into your outbox</a></li>
   <li><a href="#service">Adding Service Records to Sequencers</a></li>
   <li><a href="#trouble">Troubleshooting</a></li>
</ol>
</div>

<div id="infobox">
Download the worksheet for this section here: <a href="4-0-sequencing-worksheet">Sequencing Worksheet</a>.
</div>

<p><a name="login"></a></p>

<h1 id="logging-in">1. Logging in</h1>

<p>You need to log in to MISO LIMS in order to make changes to any LIMS entities. 
Logging in lets MISO record any changes you make on entities you have access to.
If you are a new user and have not been given a username and password, you 
will first need to get a username and password by following the steps in the
<a href="plain-0-0-admin-tasks#users">Adding Users</a> section.</p>

<hr />

<p>Try to log in now:</p>

<ol>
  <li>Click on <a href="http://miso.gsi.oicr.on.ca" target="\_new">http://miso.gsi.oicr.on.ca</a>.</li>
  <li>Enter your
username (e.g. jdoe) and password and click the Login button.</li>
</ol>

<p>If all goes well, you should see the MISO Dashboard and see a message at the
top right: &quot;Logged in as: <strong>jdoe</strong>&quot;.</p>

<p><a name="orders" href="#" id="toplink">top</a></p>

<h1 id="checking-for-unfulfilled-orders">2. Checking for unfulfilled orders</h1>

<p>The <em>Orders</em> page is used to decide what needs to be sequenced.</p>

<ol>
  <li>From the navigation menu, choose <em>Orders</em>.</li>
  <li>Verify that the pool you just created is listed in the <em>Active</em> tab.</li>
</ol>

<p>Columns on this page will disappear if there are no entries (<em>e.g.</em>,
the <em>Failed</em> column will not be shown if there are no failed runs). When enough
lanes have been sequenced, the row will disappear from the <em>Active</em> tab,
but remain in the <em>All</em> tab. Lanes currently being sequenced will be marked as
in-progress and remain on the <em>Active</em> tab until the run transitions to
<em>Completed</em>.</p>

<p>A pool can have many orders. Orders for the same platform and chemistry are
summed when displayed on this page.</p>

<h2 id="scan-libraries-into-your-inbox">2.1 Scan libraries into your inbox</h2>

<p>First, scan the libraries from the libraries team into your inbox for further
work.</p>

<p>Boxes hold samples, libraries, and pools. They do not track reagents or
primers. Boxes are separated into <em>uses</em> for different kinds of storage
(<em>e.g.</em>, tissue samples versus extracted DNA), but there is no check
that items in a box match. Each box also has a <em>size</em> that includes the
physical dimensions of the box as well as whether the box is compatible
with the VisionMate scanner. Every <em>position</em> in the box is identified
by a standard row letter + column number format (<em>e.g.</em>, C05).</p>

<hr />

<p>In this exercise, we are going to take tissues/samples/libraries from the
previous team/collaborator by scanning them out of the previous box and into a
newly created &#39;inbox&#39;.</p>

<p>First, create a new box. This box will be your &#39;inbox&#39;.</p>

<ol>
  <li>From the navigation panel, choose <em>Boxes</em> and then <em>Add Box</em>.</li>
  <li>On the <em>Create Box</em> page, enter the information:</li>
  <li>Alias: A short name for the box. Record this name in your worksheet. <img src="pics/blue_pencil.png" /></li>
  <li><em>Description</em>: a human description of the box purpose  “gDNA ready for
    library prep for <project>”.</project></li>
  <li><em>Use</em>: The contents of the box. Select an appropriate use for your entities.</li>
  <li><em>Size</em>: Select <code class="highlighter-rouge">8 x 12 scannable</code>.</li>
  <li>Click <em>Save</em>.</li>
</ol>

<p>Upon clicking save, a graphic of the box will appear.</p>

<p><img src="pics/5-empty-box.png" id="figure" /></p>

<p>You can now fill the box with the tissues, stocks, aliquots, libraries, or
pools that were made in previous steps. Collect the appropriate matrix tubes/barcodes now.</p>

<ol>
  <li>Click on a position in the displayed <em>Contents</em> grid.</li>
  <li>Enter a matrix barcode into the box on the right and click <em>Lookup</em>.</li>
  <li>Click <em>Update Position</em>.
    <ul>
      <li>&#9888; The <em>Save</em> button at the top of the page does not work for
 individual positions, only for <em>Box Information</em>.</li>
    </ul>
  </li>
  <li>Repeat for as many samples/libraries/pools as you want.</li>
</ol>

<p>The table below the box diagram shows the position and information for the
currently selected sample. If you would like to see all of the samples in the
table, click the <em>List all Box Contents</em> button at the top right of the table.</p>

<p>In the lab, it is possible to use <em>Options</em> &gt; <em>Scan Box</em> to use the plate
scanner and update all positions at once, but that will not be covered in this
tutorial.</p>

<h2 id="using-boxes">Using Boxes</h2>

<p>Boxes can be found either from the Sample or Library page or the <em>Boxes</em> page.</p>

<ol>
  <li>On the <em>Sample</em> page, search for one of your sample or library aliases and click on the alias to load the page.</li>
  <li>The Box and position is listed under <em>Location</em> near the top of the <em>Sample
Information</em> section. Click on the link to go to the Box (e.g. <code class="highlighter-rouge">PROJ_OUTBOX,
A03</code>).</li>
</ol>

<p>Boxes can be used to store Samples, Libraries and Pools and one box can store all
three types.</p>

<p><a name="nruns" href="#" id="toplink">top</a></p>

<h1 id="creating-runs-from-scratch">3. Creating runs from scratch</h1>

<p>MISO supports runs from both Illumina and PacBio sequencers (and others), so 
the terms used for instrument runs and associated libraries are intentionally 
different from those used by the vendor.
Every time a sequencer is loaded and sequencing begins,
a <em>Run</em> is created. Runs are picked up automatically from the instrument.
A <em>Sequencing Container</em> is the link between the library information and the
instrument Run and contains one or more lanes. Each Illumina lane, or
PacBio SMRT cell in the container is loaded with exactly one <em>Pool</em>.  Runs and
Containers can be associated as soon as the Run and Container are both created.</p>

<h2 id="create-a-container">3.1 Create a Container</h2>

<ol>
  <li>On the <em>Sequencing Containers</em> page, select the Illumina platform and click the <em>Create Flowcell</em> button near the top left of the table.</li>
  <li>Select <em>NextSeq 550</em> platform. Only active (non-retired) models are available.</li>
  <li>Select <em>4 Lane</em> for the size of the container.</li>
  <li>Enter the name of your project as the serial number.</li>
  <li>Click <em>Save</em> in the upper right corner of the page.</li>
</ol>

<h2 id="create-a-run">3.2 Create a Run</h2>

<ol>
  <li>On the <em>Runs</em> page, select the Illumina platform and click the <em>Create Illumina Run</em> button near the top left corner of the table.</li>
  <li>Select <em>NB551056 (NextSeq 550)</em> from the sequencers list. Only active (non-retired) sequencers are available.</li>
  <li>Enter a unique and memorable <em>Alias</em> for your run.</li>
  <li>Select <em>Sequencing Parameters</em> <code class="highlighter-rouge">High 2×151</code>, near the top of the Run section.</li>
  <li>In the <em>Run Path</em> field, enter <code class="highlighter-rouge">path</code> as the file path to the sequencer output.</li>
  <li>Check <em>Paired End</em>.</li>
  <li>Select <em>Status</em> <code class="highlighter-rouge">Running</code>. Note that if MISO does not automatically detect runs from this sequencer, all status updates will have to be entered manually.</li>
  <li>Enter a date into <em>Start Date</em>.</li>
  <li>Click <em>Save</em> in the upper right corner of the page.</li>
  <li>In the <em>Flow Cell</em> section, click the <em>Add Flow Cell</em> button.</li>
  <li>Enter the flow cell serial number of the container you have just created and click the <em>Add</em> button.</li>
</ol>

<p><a name="aruns" href="#" id="toplink">top</a></p>

<h1 id="working-with-automatically-created-runs">4. Working with automatically created runs</h1>

<p>About five minutes after an instrument begins imaging, MISO will detect it
and create a <em>Run</em>. As sequencing continues, MISO will pull back information
about the quality of the run similar to the on-instrument applications like SAV.
This includes statistics like percent pass filter, the percent of bases with
Qscores over 30, and cluster density.</p>

<ol>
  <li>From the <em>Runs</em> page, find the run assigned to you for this tutorial. Click
on the run alias to go to the run page.</li>
  <li>Scroll down to the <em>Metrics</em> section and examine the sequencing metrics for
this run.</li>
</ol>

<p><a href="pics/metrics.png"><img style="width:100%;" src="pics/metrics.png" /></a></p>

<p><a name="pools" href="#" id="toplink">top</a></p>

<h1 id="adding-pools-to-runs">5. Adding pools to runs</h1>

<p>The Run (representing an instrument run) is associated with Pools using a
<em>Sequencing Container</em>.</p>

<p><img src="pics/flow-cell.svg" /></p>

<h2 id="add-a-pool-to-a-run">5.1 Add a pool to a run</h2>

<ol>
  <li>On the Run assigned to you, scroll down to the <em>Lanes</em> section.</li>
  <li>Check the first the lane.</li>
  <li>Click <em>Assign Pool</em> from the toolbar.</li>
  <li>Search for the pool you previously created. Try <em>Outstanding Orders (Matched Chemistry)</em>.</li>
  <li>Click the pool from the list.</li>
</ol>

<p>Now check on the Order.</p>

<ol>
  <li>Click on the <em>Orders</em> page and verify that the <em>Remaining</em> column now
shows 1 for the pool you added to the run.</li>
</ol>

<p><a name="lowQuality" href="#" id="toplink">top</a></p>

<h2 id="mark-a-library-as-low-quality">5.1 Mark a library as Low Quality</h2>
<p>Not every library realises its full potential. After sequencing, specific
libraries can be flagged as having low sequencing quality. The
&quot;Low Quality Sequencing&quot; indicator causes any pool containing this library to be
flagged, so that it can be checked before it is sequenced again.</p>

<ol>
  <li>From the <em>Libraries</em> page, find one of your libraries
and click the link.</li>
  <li>Check <em>Low Quality Sequencing</em>.</li>
  <li>Click <em>Save</em>.</li>
</ol>

<p>Now if the Pool containing that Library is added to a Sequencing Container, it
will be flagged.</p>

<ol>
  <li>Go back to your Run page.</li>
  <li>Find your pool using the lanes table. It will be flagged red.</li>
</ol>

<h2 id="setting-per-lane-qcs">5.2 Setting Per-Lane QCs</h2>
<p>Sometimes a particular lane is bad. MISO allows setting a per-lane QC. This does 
<em>not</em> prevent analysis. Contact GSI when a lane should not be analysed.</p>

<ol>
  <li>Go to your run page.</li>
  <li>Check the first run.</li>
  <li>Click <em>Set QC</em> from the toolbar.</li>
  <li>Pick <em>Failed: Other problem</em>.</li>
  <li>Enter a description of the problem.</li>
  <li>Click <em>Set</em>.</li>
</ol>

<p><a name="boxes" href="#" id="toplink">top</a></p>

<h1 id="scanning-librariespools-into-your-outbox">6. Scanning libraries/pools into your outbox</h1>

<p>Lastly, place the libraries/pools in your outbox for storage.</p>

<p>Finally, update the <em>TUTORIAL_OUTBOX</em> with your samples/libraries/pools to
pass them on to the next team or to put them into storage.</p>

<h3 id="removing-and-discarding-tubes">Removing and discarding tubes</h3>

<p>When you have a position selected, you can also either remove the tube from the
box (setting its location to &quot;Unknown&quot;) or discard the tube, meaning it has been
used up. Discarding the tube sets the volume of the sample to 0 and marks it as
&quot;discarded&quot;, and removes it from its box.</p>

<ol>
  <li>Click on one of the positions in the box with a tube. The position, alias,
and barcode will appear to the right or below the box graphic. 
Right-click on the alias and pick &quot;Open in new tab&quot; to load the details page.</li>
  <li>Go back to the Box page in the other tab. Make sure the tube is still selected in
the Box and click <em>Discard Tube</em>. Click &quot;OK&quot; in the pop-up.</li>
  <li>Go to the other tab with the Details page and click the browser refresh
button. The <em>Location</em> field will show as blank, <em>Volume</em> will be set to 0.0,
and the <em>Discarded</em> box will be ticked.</li>
</ol>

<h3 id="moving-items-around-in-boxes">Moving items around in boxes</h3>

<p>An item can only exist in one box. If assigned to a new box, it will
disappear from the original.</p>

<ol>
  <li>In the current tab, go to the <em>Boxes</em> page, find the <em>TUTORIAL_OUTBOX</em> box. This box was previously
created by the MISO developers for the tutorial.</li>
  <li>Choose an empty position and enter one of your barcodes.</li>
  <li>Click <em>Lookup</em> and <em>Update Position</em>.</li>
  <li>Go back to your own Box and refresh the page. The sample was removed.</li>
  <li>Repeat this process for the rest of the samples/libraries that you are transferring to the next team.</li>
</ol>

<p><a name="service" href="#" id="toplink">top</a></p>

<h1 id="adding-service-records-to-sequencers">7. Adding Service Records to Sequencers</h1>

<p>Each sequencer can have one or more associated service records.</p>

<ol>
  <li>Select <em>Sequencers</em>.</li>
  <li>Choose an individual sequencer.</li>
  <li>Use the blue arrow to expand the <em>Service Records</em> section.</li>
  <li>From <em>Options</em>, choose <em>Add Sequencer Record</em>.</li>
  <li>Fill in the form as follows:
    <ul>
      <li><em>Title</em>: a short description of the work (<em>e.g.</em>, <code class="highlighter-rouge">Remove gremlin from sequencer</code>)</li>
      <li><em>Description</em>: a long description of the work (<em>e.g.</em>, <code class="highlighter-rouge">A gremlin was found outside of the terrible 80s movie. It had developed a taste for polymerase.</code>)</li>
      <li><em>Serviced By</em>: your name</li>
      <li><em>Service Date</em>: the current date</li>
    </ul>
  </li>
  <li>Click <em>Save</em>.</li>
</ol>

<p>After saving, it is also possible to attach files to the record. Look under the <em>Attachments</em> heading.</p>

<p><a name="trouble" href="#" id="toplink">top</a></p>

<h1 id="troubleshooting">8. Troubleshooting</h1>

<ol>
  <li>When instruments break down, how do you log failures into the system?
    <ul>
      <li>Add a service record as in <a href="#service">7: Adding Service Records to Sequencers</a></li>
    </ul>
  </li>
  <li>How do you assign single lane failures (if possible)?
    <ul>
      <li>It is possible to add a RunQC which allows you to select one or more lanes, but adding one does not change the Orders count for the pool in that lane (ie. it does not &quot;requeue&quot; the pool). At this time, please go to the Edit Pool page for the pool in the lane and add another Order for the number of lanes and sequencing parameters requested.</li>
    </ul>
  </li>
  <li>How you fail flowcells? Or how does MISO detect failed runs?
    <ul>
      <li>If MISO automatically detects runs from this sequencer, then in most cases MISO will automatically detect failed runs if the run has begun sequencing.</li>
      <li>If MISO does not automatically detect runs from this sequencer or you note that MISO has not detected that the run has failed, then you must select the <code class="highlighter-rouge">Failed</code> status on the Edit Run page, and enter a completion date.</li>
      <li>If the pool contains a single library and you know that the library is of low enough quality that sequencing should not be attempted again, follow the steps to <a href="#lowQuality">mark a library as Low Quality</a>.</li>
    </ul>
  </li>
</ol>

<table>
  <tbody>
    <tr>
      <td>&lt; <a href="plain-3-0-libraries">Libraries tutorial</a></td>
      <td><a href="plain-index">Home</a> &gt;</td>
    </tr>
  </tbody>
</table>


                    </div>
                
            </div>

            

            <div class="row">
                <div id="footer" class="col-sm-12">
                    Documentation for <a href="https://github.com/TGAC/miso-lims">MISO</a> developed by the <a href="http://labs.oicr.on.ca/genome-sequence-informatics/">Genome Sequence Informatics</a> group at <a href="http://oicr.on.ca">Ontario Institute for Cancer Research</a>


                </div>
            </div>
        </div>

        <script src="/miso-docs-oicr/styles/navigation.js"></script>

    </body>
</html>
